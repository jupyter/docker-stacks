name: Load Docker image
description: Download the image tar and load it to Docker

inputs:
  image:
    description: Image name
    required: true
  platform:
    description: Image platform
    required: true
  variant:
    description: Variant tag prefix
    required: true

runs:
  using: composite
  steps:
    - name: Download built image ðŸ“¥
      uses: actions/download-artifact@634f93cb2916e3fdff6788551b99b062d0335ce0 # v5.0.0
      with:
        name: ${{ inputs.image }}-${{ inputs.platform }}-${{ inputs.variant }}
        path: /tmp/jupyter/images/

    - name: Load downloaded image to docker ðŸ“¥
      run: |
        zstd \
          --uncompress \
          --stdout \
          --rm \
          /tmp/jupyter/images/${{ inputs.image }}-${{ inputs.platform }}-${{ inputs.variant }}.tar.zst \
          | docker load
      shell: bash

    - name: Show Docker images ðŸ“¦
      run: docker image ls --all
      shell: bash
